<!DOCTYPE html>
<html>

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>同济识图, "鉴"你所见</title>
    <script type="text/javascript" src="//img0.bdstatic.com/static/home/shitu/mod_6f6741d.js"></script>
    <link rel="stylesheet" type="text/css" href="//img0.bdstatic.com/static/home/shitu/reset_3f5059c.css" />
    <link rel="stylesheet" type="text/css" href="//img1.bdstatic.com/static/home/pkg/stu_3c9d544.css" />
    <link rel="stylesheet" type="text/css"
        href="//img1.bdstatic.com/static/common/widget/ui/slider/slider_ecce195.css" />
    <link rel="stylesheet" type="text/css" href="//img1.bdstatic.com/static/common/pkg/co_2e2be3c.css" />
    <link rel="stylesheet" type="text/css"
        href="//img0.bdstatic.com/static/common/widget/ui/userInfo/userInfo_5bd6198.css" />

    <script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
    <style>
        .max {
            transition: 0.3s;
            width: 180px;
            height: 180px;
        }

        .min {
            transition: 0.3s;
            width: 80px;
            height: 80px;
        }

        .table-td {
            transition: 0.3s;
            width: 80px;
            height: 80px;
            position: relative;
        }

        .tagbtn {
            background-color: rgba(7, 214, 221, 0.7);
            position: absolute;
            z-index: 10;
            top: 75%;
            left: 63%;
            width: 30px;
            height: 15px;
            font-size: 5px;
        }
    </style>
    <script>
        $(function () {
            for (var i = 0; i <= 8; i++) {
                $('#img' + String(i)).click(function () {
                    $(this).toggleClass('min');
                    $(this).toggleClass('max');
                });
            }
        });
    </script>

    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
</head>

<body class="">
    <!--幻灯片的轮播 & 识图一下点击事件-->
    <script type="text/javascript">
        require.siteNS && require.siteNS(["home", "common"]);
        require.resourceMap({
            "res": {
                "common:widget/ui/arch/router.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/arch/router_1670dcf.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/ui/arch/app.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/arch/app_c1dac05.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/arch/router.js"]
                },
                "common:widget/ui/base/EventDispatcher.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/base/EventDispatcher_e71d337.js",
                    "pkg": "common:p1"
                },
                "common:widget/ui/base/events.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/base/events_f8b4e1f.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/base/EventDispatcher.js"]
                },
                "common:widget/ui/arch/behavior/pageresizer.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/arch/behavior/pageresizer_9f05f70.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/base/events.js"]
                },
                "common:widget/ui/arch/localdb.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/arch/localdb_1fa8a65.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/ui/arch/collection.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/arch/collection_8624f21.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/base/events.js",
                        "common:widget/ui/arch/localdb.js"
                    ]
                },
                "common:widget/ui/arch/handlers.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/arch/handlers_2d9d42f.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/ui/events/events.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/events/events_87337df.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/base/EventDispatcher.js"]
                },
                "common:widget/ui/utils/scroller.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/utils/scroller_efc1f29.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/events/events.js"]
                },
                "common:widget/ui/utils/pageresizer.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/utils/pageresizer_9feba52.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/events/events.js"]
                },
                "common:widget/ui/utils/utils.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/utils/utils_bd26384.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/utils/scroller.js",
                        "common:widget/ui/utils/pageresizer.js"
                    ]
                },
                "common:widget/ui/arch/history.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/arch/history_dbb6541.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/utils/utils.js",
                        "common:widget/ui/base/events.js"
                    ]
                },
                "common:widget/ui/arch/model.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/arch/model_32910e4.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/ui/arch/pagemodel.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/arch/pagemodel_8be1499.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/utils/utils.js",
                        "common:widget/ui/base/events.js", "common:widget/ui/arch/model.js"
                    ]
                },
                "common:widget/ui/base/subject.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/base/subject_7c3c6c3.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/ui/EventEmitter/EventEmitter.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/EventEmitter/EventEmitter_655344a.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/ui/monitorRequest/monitorRequest.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/monitorRequest/monitorRequest_cabcf84.js",
                    "pkg": "common:p1"
                },
                "common:widget/ui/searchUtils/searchUtils.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/searchUtils/searchUtils_17600ce.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/ui/slider/slider.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/slider/slider_545c0c2.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js",
                        "common:widget/ui/EventEmitter/EventEmitter.js"
                    ]
                },
                "common:widget/ui/statistic/statistic.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/statistic/statistic_09d1c4a.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js",
                        "common:widget/ui/monitorRequest/monitorRequest.js",
                        "common:widget/ui/base/events.js", "common:widget/ui/utils/utils.js"
                    ]
                },
                "common:widget/ui/suggest/data.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/suggest/data_89dc815.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/utils/utils.js",
                        "common:widget/ui/base/events.js"
                    ]
                },
                "common:widget/ui/suggest/inputwatcher.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/suggest/inputwatcher_2eb7c40.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/base/events.js"]
                },
                "common:widget/ui/suggest/suggestionlist.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/suggest/suggestionlist_37c79c7.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/base/events.js"]
                },
                "common:widget/ui/suggest/suggestion.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/suggest/suggestion_1507f89.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/base/events.js",
                        "common:widget/ui/suggest/data.js", "common:widget/ui/suggest/inputwatcher.js",
                        "common:widget/ui/suggest/suggestionlist.js"
                    ]
                },
                "common:widget/ui/sugHistory/sugHistory.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/sugHistory/sugHistory_4277c60.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/statistic/statistic.js",
                        "common:widget/ui/utils/utils.js"
                    ]
                },
                "common:widget/ui/SugRec/SugRec.js": {
                    "url": "//img2.bdstatic.com/static/common/widget/ui/SugRec/SugRec_3755387.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/statistic/statistic.js"]
                },
                "common:widget/ui/swf/swf.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/swf/swf_b5294d0.js",
                    "pkg": "common:p1"
                },
                "common:widget/ui/userInfo/userInfo.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/ui/userInfo/userInfo_4160d44.js",
                    "pkg": "common:p1",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/searchUtils/searchUtils.js",
                        "common:widget/ui/base/events.js", "common:widget/ui/utils/utils.js"
                    ]
                },
                "common:widget/ui/feedback/feedback.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/ui/feedback/feedback_4002381.js",
                    "pkg": "common:p1"
                },
                "common:widget/shitu/static/animate.js": {
                    "url": "//img1.bdstatic.com/static/common/widget/shitu/static/animate_d5993fc.js",
                    "deps": ["common:widget/ui/base/base.js"]
                },
                "common:widget/shitu/run.js": {
                    "url": "//img0.bdstatic.com/static/common/widget/shitu/run_c4ee0ab.js",
                    "deps": ["common:widget/ui/base/base.js", "common:widget/ui/utils/utils.js",
                        "common:widget/shitu/static/animate.js"
                    ]
                },
                "home:static/shitu/index.js": {
                    "url": "//img1.bdstatic.com/static/home/shitu/index_ba03d37.js"
                }
            },
            "pkg": {
                "common:p1": {
                    "url": "//img0.bdstatic.com/static/common/pkg/cores_b4aad57.js"
                }
            }
        });
    </script>

    <div class='shitu-wrapper'>
        <div class='shitu-upper'>

            <div class="shitu-carousel">
                <ul class="carousel-wrapper">
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b01.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b01.jpg',  sizingMethod='scale');">
                    </li>
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b04.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b04.jpg',  sizingMethod='scale');">
                    </li>
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b02.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b02.jpg',  sizingMethod='scale');">
                    </li>
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b05.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b05.jpg',  sizingMethod='scale');">
                    </li>
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b01.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b01.jpg',  sizingMethod='scale');">
                    </li>
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b04.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b04.jpg',  sizingMethod='scale');">
                    </li>
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b02.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b02.jpg',  sizingMethod='scale');">
                    </li>
                    <li
                        style="background-image: url(//img6.bdstatic.com/img/image/pcindex/shitu_b05.jpg); filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//img6.bdstatic.com/img/image/pcindex/shitu_b05.jpg',  sizingMethod='scale');">
                    </li>
                </ul>
                <div class="shitu-mask"></div>
                <ul class="shitu-line">
                    <li class="active" style="margin-right: 4px"></li>
                    <li class="" style="margin-right: 4px"></li>
                    <li class="" style="margin-right: 4px"></li>
                    <li class="" style="margin-right: 0"></li>
                </ul>
            </div>

            <div class="shitu-logo">
                <div class="up"></div>
                <div class="content">
                    <p class="main-title"><span class="front">同济识图</span><span classs="rear">鉴你所见</span></p>
                    <p class="sub-title">丛林中的生命密码，你读懂了多少</p><a href="javascript: void(0);" class="shitu-btn">识图一下</a>
                </div>
            </div>

            <div id="stcontent" class="common-shitu" style="position: absolute;top: 0%;left: 0%;
            width: 80%;height: 80%;margin-left: 10%;margin-top: 5%;">

                <div id="stsug" class="stsug" style="width: 100%; height: 100%;position: relative;">
                    <div id="main" class="container" style="width: 100%; height: 100%;margin: 0 auto;
                    background-color: rgba(255, 255, 255, 0.5);">
                        <div class="container-text" style="margin-left: 30%;">
                            <td><b style="float: left;margin-top: 10%;color: rgb(32, 134, 218);
                            font-size: 35px;border:4px rgb(32, 134, 218) solid;margin-bottom: 5px;">
                                    Chose your file to upload </b></td>
                            <div style="clear: both;"></div>
                            <form method=post enctype=multipart/form-data"> <input type="file" name="file" required
                                onchange="show(this)" />
                            <input type=submit value="Search!" onclick="fun()">
                            </form>
                            <tr id="row1" style="display:none;">
                                <td><a href="">
                                        <button id="clear" style="display:none;">Clear</button>
                                    </a></td>
                                <td></td>
                            </tr>
                        </div>

                        <center>
                            <img id="load" src="/images/ajax-loader.gif"
                                style="height:100px;weight:100px;display:none;">
                        </center>

                        <center>
                            <td>
                                <b id="retrieval-result1" style="color: rgb(103, 32, 218);
                                    font-size: 15px;display: none;">
                                    本次共检索到 </b>
                                <b id="retrieval-result2" style="color: rgb(255, 0, 0);
                                    font-size: 15px;display: none;">
                                    &nbsp;8&nbsp; </b>
                                <b id="retrieval-result3" style="color: rgb(103, 32, 218);
                                    font-size: 15px;display: none;">
                                    张相似图片 </b>
                            </td>
                        </center>

                        <div id="main" class="container">
                            <div style="display: inline-block; margin-left: 20%;">
                                <img id="source_img" src="" draggable="false" />
                            </div>

                            <div style="display: inline-block; margin-left: 10%;">
                                <table id="table" class="table" style="display:none;">
                                    <tbody>
                                        <tr>
                                            <td class="table-td">
                                                <img class="min" id="img0" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn0"></div>
                                            </td>
                                            <td class="table-td">
                                                <img class="min" id="img1" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn1"></div>
                                            </td>
                                            <td class="table-td">
                                                <img class="min" id="img2" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn2"></div>
                                            </td>
                                            <td class="table-td">
                                                <img class="min" id="img3" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn3"></div>
                                            </td>
                                        </tr>

                                        <tr>

                                            <td class="table-td">
                                                <img class="min" id="img4" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn4"></div>
                                            </td>
                                            <td class="table-td">
                                                <img class="min" id="img5" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn5"></div>
                                            </td>
                                            <td class="table-td">
                                                <img class="min" id="img6" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn6"></div>
                                            </td>
                                            <td class="table-td">
                                                <img class="min" id="img7" src="" alt="Norway" />
                                                <div class="tagbtn" id="tagbtn7"></div>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>

                            <div style="margin-left: 70%;z-index: 9999; position: fixed ! important;
                            right: 12%;top: 40%;">
                                <table id="tagtable" class="table" style="display:none;bottom: 30%;">
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div style="margin-left: 70%;z-index: 9999; position: fixed ! important;
                        right: 12%;top: 67%;">
                            <img class="favorites"
                                src="https://upload-images.jianshu.io/upload_images/12014150-dd7e1b70111fdaa9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"
                                id="favorites"
                                style="position: absolute;right: 0px; top: 0px;width: 120px; height: 95px;"
                                draggable="false" onclick="favoritesClick()" />
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
         var tags = null;

        function myFunction() {
            document.getElementById("predictedResult").innerHTML = "";
            $('#clear').hide();
        }

        function fun() {
            $('#load').show();
            $("form").submit(function (evt) {
                //$('#loader-icon').show();
                evt.preventDefault();
                //$('#loader-icon').show();
                var formData = new FormData($(this)[0]);
                $.ajax({
                    url: 'imgUpload',
                    type: 'POST',
                    data: formData,
                    //async: false,
                    cache: false,
                    contentType: false,
                    enctype: 'multipart/form-data',
                    processData: false,
                    success: function (response) {
                        $('#load').hide();
                        $('#row1').show();
                        //$('#clear').show();
                        //console.log(response[1]);
                        //document.getElementById("predictedResult").innerHTML= response;
                        document.getElementById("img0").src = response.image0[0];
                        document.getElementById("img1").src = response.image1[0];
                        document.getElementById("img2").src = response.image2[0];
                        document.getElementById("img3").src = response.image3[0];
                        document.getElementById("img4").src = response.image4[0];
                        document.getElementById("img5").src = response.image5[0];
                        document.getElementById("img6").src = response.image6[0];
                        document.getElementById("img7").src = response.image7[0];

                        document.getElementById("tagbtn0").append(response.image0[1])
                        document.getElementById("tagbtn0").name=response.image0[1]
                        document.getElementById("img0").name=response.image0[1]

                        document.getElementById("tagbtn1").append(response.image1[1])
                        document.getElementById("tagbtn1").name=response.image1[1]
                        document.getElementById("img1").name=response.image1[1]

                        document.getElementById("tagbtn2").append(response.image2[1])
                        document.getElementById("tagbtn2").name=response.image2[1]
                        document.getElementById("img2").name=response.image2[1]

                        document.getElementById("tagbtn3").append(response.image3[1])
                        document.getElementById("tagbtn3").name=response.image3[1]
                        document.getElementById("img3").name=response.image3[1]

                        document.getElementById("tagbtn4").append(response.image4[1])
                        document.getElementById("tagbtn4").name=response.image4[1]
                        document.getElementById("img4").name=response.image4[1]

                        document.getElementById("tagbtn5").append(response.image5[1])
                        document.getElementById("tagbtn5").name=response.image5[1]
                        document.getElementById("img5").name=response.image5[1]

                        document.getElementById("tagbtn6").append(response.image6[1])
                        document.getElementById("tagbtn6").name=response.image6[1]
                        document.getElementById("img6").name=response.image6[1]

                        document.getElementById("tagbtn7").append(response.image7[1])
                        document.getElementById("tagbtn7").name=response.image7[1]
                        document.getElementById("img7").name=response.image7[1]

                        tags = response.tags
                        console.log(tags)
                        for (var i = 0; i < tags.length; ++i) {
                            addrow(tags[i])
                        }

                        //document.getElementById("img8").src = response.image8;
                        $('#table').show();
                        $('#tagtable').show();
                        $('#clear').show();

                        //显示检索结果
                        $('#retrieval-result1').show();
                        $('#retrieval-result2').show();
                        $('#retrieval-result3').show();
                    }
                });
                return false;
            })
        };
    </script>

    <script>
        function show(file) {
            var reader = new FileReader(); // 实例化一个FileReader对象，用于读取文件
            var source_img = document.getElementById('source_img'); // 获取要显示图片的标签

            //读取File对象的数据
            reader.onload = function (evt) {
                source_img.width = "180";
                source_img.height = "180";
                source_img.src = evt.target.result;
            }
            reader.readAsDataURL(file.files[0]);
        }
    </script>

</body>

<script type="text/javascript" src="//img0.bdstatic.com/static/common/widget/ui/base/base_a66ce51.js"></script>
<script type="text/javascript" src="//img1.bdstatic.com/static/home/widget/shitu/carousel/carousel_b51b2a8.js"></script>
<script type="text/javascript">
    ! function () {
        window.tn = 'shitu-index';
        window.vsid = "a4d652d612c306399706e6596e2e3eae7af7859c";
        require.async(["common:widget/ui/base/base", "common:widget/shitu/run"], function ($, shitu) {
            $(document).ready(function () {
                var st = new shitu();
                st.init();
                window.stInstance = st;
            });
        });
    }
    ();
    ! function () {
        require.async(["common:widget/ui/base/base"], function (e) {
            e.browser.msie || e(".shitu-img").each(function (e, t) {
                t.onselectstart = function () {
                    return !1
                }, t.ondragstart = function (e) {
                    return e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0, e
                        .dataTransfer.dropEffect = "move", e.dataTransfer.effectAllowed = "move", !0
                }
            })
        });
    }
    ();
    ! function () {
        window.shituTitles = [
            "\u4e1b\u6797\u4e2d\u7684\u751f\u547d\u5bc6\u7801\uff0c\u4f60\u8bfb\u61c2\u4e86\u591a\u5c11",
            "\u5c71\u91ce\u91cc\u7684\u82b1\u82b1\u4e16\u754c\uff0c\u662f\u5426\u60f3\u4e00\u63a2\u7a76\u7adf",
            "\u5728\u68a6\u60f3\u7684\u8f66\u5e93\u91cc\uff0c\u4f60\u6253\u7b97\u88c5\u8fdb\u54ea\u4e9b\u5b9d\u8d1d",
            "\u79cd\u8349\u65f6\u8282\uff0c\u5973\u795e\u7684\u5fc3\u5934\u597d\u7269\u4f60\u77e5\u9053\u591a\u5c11"
        ];
        require.async(["home:static/shitu/index"]);
    }
    ();
</script>

<script type="text/javascript">
    const OPEN = 1;
    const CLOSED = 2;
    const STAR_OPEN = 3;
    const STAR_CLOSED = 4;

    var favorites_img = [];
    var favorites_flag = CLOSED;

    document.addEventListener("dragstart", function (event) {
        console.log("start...")
        //dataTransfer.setData()方法设置数据类型和拖动的数据 
        console.log(event.target.id)
        event.dataTransfer.setData("Text", event.target.id);
        //修改拖动元素的透明度 
        event.target.style.opacity = "0.4";
    });
    // 当拖完p元素输出一些文本元素和重置透明度 
    document.addEventListener("dragend", function (event) {
        event.target.style.opacity = "1";
    });
    // 当p元素完成拖动进入droptarget,改变div的边框样式 
    document.addEventListener("dragenter", function (event) {
        if (event.target.className == "favorites") {
            console.log("ok...")
        }
    });

    /*对于drop,防止浏览器的默认处理数据(在drop中链接是默认打开) 
    复位输出文本的颜色和DIV的边框颜色 
    利用dataTransfer.getData()方法获得拖放数据 
    拖拖的数据元素id("drag1") 
    拖拽元素附加到drop元素*/
    document.addEventListener("drop", function (event) {
        event.preventDefault();
        if (event.target.className == "favorites") {
            if (favorites_flag == OPEN) {
                favorites_flag = STAR_OPEN;
            } else if (favorites_flag == CLOSED) {
                favorites_flag = STAR_CLOSED;
            }
            //更换收藏夹图标
            event.target.src =
                "https://upload-images.jianshu.io/upload_images/12014150-383ad52c8d75dfbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"

            var data = event.dataTransfer.getData("Text");
            favorites_img.push(data)
        }
    });

    // 默认情况下,数据/元素不能在其他元素中被拖放。对于drop我们必须防止元素的默认处理 
    document.addEventListener("dragover", function (event) {
        event.preventDefault();
    });

    function favoritesClick() {
        favoriateData = document.getElementById("favorites");
        if (favorites_flag == OPEN) {
            favorites_flag = CLOSED;
            favoriateData.src =
                "https://upload-images.jianshu.io/upload_images/12014150-dd7e1b70111fdaa9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240";
        } else if (favorites_flag == CLOSED) {
            favorites_flag = OPEN;
            favoriateData.src =
                "https://upload-images.jianshu.io/upload_images/12014150-1b0432d7f3f099a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240";
        } else if (favorites_flag == STAR_CLOSED) {
            favorites_flag = STAR_OPEN;
            favoriateData.src =
                "https://upload-images.jianshu.io/upload_images/12014150-1b0432d7f3f099a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"
            for (var i = 0; i <= 8; ++i) {
                if (favorites_img.indexOf("img" + String(i)) == -1) {
                    document.getElementById("img" + String(i)).style.visibility = "hidden";
                    document.getElementById("tagbtn" + String(i)).style.visibility = "hidden";
                }
            }
        } else if (favorites_flag == STAR_OPEN) {
            favorites_flag = STAR_CLOSED;
            favoriateData.src =
                "https://upload-images.jianshu.io/upload_images/12014150-383ad52c8d75dfbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240";
            for (var i = 0; i <= 8; ++i) {
                document.getElementById("img" + String(i)).style.visibility = "visible";
                document.getElementById("tagbtn" + String(i)).style.visibility = "visible";
            }
        }
    }
</script>

<script type="text/javascript">
    function addrow(name) {
        var c = document.getElementById('tagtable'); //获得表格的信息
        if (c.rows.length == 0) { //如果是向一个空表增加一行
            var x = c.insertRow(0); //向空表插入一行
            var y = x.insertCell(0); //向新行插入一列
            y.innerHTML+="<button id=\""+name+"\" style=\"background-color: rgba(7, 214, 221);\" onclick=\"tagClick(this)\">"+name+"</button>"
        } else {
            var z = c.rows[0].cells; //如果不是空表，首先获得表格有多少列，先获取再插入新行
            var x = c.insertRow(0);
            for (var i = 0; i < z.length; i++) { //依次向新行插入表格列数的单元格
                var y = x.insertCell(i);
                y.innerHTML+="<button id=\""+name+"\" style=\"background-color: rgba(7, 214, 221);\" onclick=\"tagClick(this)\">"+name+"</button>"

            }
        }
    }

    function tagClick(e){
        console.log(e.id)
        visible_obj = document.getElementsByName(String(e.id));
        for(var i=0;i<visible_obj.length;++i){
            visible_obj[i].style.visibility="visible";
        }

        for (var i=0;i<tags.length;++i){
            if(tags[i]!=e.id){
                hidden_obj = document.getElementsByName(String(tags[i]));
                for(var i=0;i<hidden_obj.length;++i){
                    hidden_obj[i].style.visibility = "hidden";

                }
            }
        }
    }
</script>

</html>
